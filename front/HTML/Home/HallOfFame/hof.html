<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hall of Fame</title>
    <link rel="stylesheet" href="/front/CSS/global-swbf.css">
    <script type="module" src="/front/JS/navbar.js"></script>
    <script type="module" src="/front/JS/themes.js"></script>
    <script type="module" src="/db/database-loader.js" defer></script>
    <style>
        .frame-content h1, .frame-content h2, .frame-content h3, .frame-content h4 {
            margin: 0;
        }

        ul {
            text-transform: none;
        }
    </style>

    <script type="module">
        import { loadListNavbar } from '/front/JS/navbar.js';

        document.addEventListener("DOMContentLoaded", () => {
            const menuItems = [
                { title: "Home", href: "/front/HTML/home.html" },
                { title: "Hall of Fame", href: "../hof-index.html" },
                { title: "Class", href: "" }
            ];

            loadListNavbar("navbar-container", menuItems);
        });
    </script>
    <script>
        function getQueryParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        fetch('/hof.json')
            .then(response => response.json())
            .then(hofData => {
                const container = document.getElementById('hof-container');
                const classFilter = getQueryParameter('classOf');
                
                function generateHTML(node) {
                    if (node.tagName === 'player' || node.tagName === 'team') {
                        return `
                            <div class="frame">
                                <div class="frame-header">
                                    <h2>${node.attributes.name}</h2>
                                </div>
                                <div class="frame-content">
                                    <p><strong>Years Active:</strong> ${node.attributes.yearsactive.from} - ${node.attributes.yearsactive.to}</p>
                                    ${node.attributes.title?.length ? `
                                    <h4>Titles:</h4>
                                    <ul>${node.attributes.title.map(member => `<li>${member}</li>`).join('')}</ul>` : ''}
                                    
                                    ${node.tagName === 'team' && node.attributes.members?.length ? `
                                    <h4>Members:</h4>
                                    <ul>${node.attributes.members.map(member => `<li>${member}</li>`).join('')}</ul>` : ''}
                                    
                                    ${node.attributes.accomplishments?.length ? `
                                    <h4>Accomplishments:</h4>
                                    <ul>${node.attributes.accomplishments.map(acc => `<li>${acc}</li>`).join('')}</ul>` : ''}
                                    
                                    ${node.attributes.comments?.length ? `
                                    <h4>Comments:</h4>
                                    <ul>${node.attributes.comments.map(comment => `
                                        <li><strong>${comment.author}:</strong> <i>"${comment.message}."</i></li>
                                    `).join('')}</ul>` : ''}
                                </div>
                            </div>
                        `;
                    } else if (node.children) {
                        return node.children.map(generateHTML).join('');
                    }
                    return '';
                }
                
                let filteredData = hofData;
                if (classFilter) {
                    filteredData = hofData.children.find(classNode => classNode.tagName === 'class' && classNode.attributes.year === classFilter);
                }
                
                container.innerHTML = filteredData ? generateHTML(filteredData) : '<p>No data found for the selected class.</p>';
            })
            .catch(error => console.error('Error loading JSON:', error));
    </script>
</head>

<body>
    <nav id="navbar-container"></nav>

    <div class="section vertical">
        <div id="hof-container"></div>
    </div>
</body>
</html>