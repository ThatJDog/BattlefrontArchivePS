<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="../CSS/profile-style.css"> -->
  <link rel="stylesheet" href="../CSS/elo-graph.css">
  <link rel="stylesheet" href="../CSS/global-swbf.css">
  <link rel="stylesheet" href="../CSS/popup.css">
  <script type="module" src="../JS/navbar.js"></script>
  <script type="module" src="../JS/themes.js"></script>
  <script src="../JS/popup.js"></script> <!-- Replace with the actual path -->
  <style>
    /* Profile Header Frame */
    /*.profile-header {
        display: flex;
        align-items: center;
        gap: 20px;
    }*/

    /* Profile Picture */
    .profile-picture img {
        width: 120px;
        height: 160px;
        object-fit: cover;
        border-radius: 8px;
    }

    /* Profile Info */
    .profile-info {
        display: flex;
        flex-direction: column;
    }

    .profile-info h1 {
        margin: 0;
        font-size: 24px;
    }

    .profile-info p {
        margin: 5px 0;
        font-size: 16px;
        color: var(--secondary-text-color);
    }

</style>

  <script type="module" src="/db/database-loader.js" defer></script>
  <title>ELO Graph</title>
</head>
<body>
    <!-- Universal Popup Overlay (Hidden by Default) -->
    <div id="popupOverlay" class="popup-overlay">
        <div class="popup-content">
            <button class="close-btn" onclick="closePopup()">âœ–</button>
            <div id="popupContent"></div>
        </div>
    </div>

    <!-- Example buttons to open different pages in the popup -->
    <button onclick="openPopup('./match-score.html', { matchID: 1234 })" class="open-popup-btn">Open Stats</button>

    <div class="section-container">
        <!-- Player Profile Section -->
        <div class="section" style="width: 35%">
            <div class="frame profile-header" style="height: 100%">
                <div class="profile-picture">
                    <img src="/path/to/profile-picture.jpg" alt="Player Picture" />
                </div>
                <div class="profile-info">
                    <h1>Player Name</h1>
                    <p>Age: 23</p>
                    <p>Nationality: English</p>
                    <p>Value: $10M</p>
                    <p>Contract Expiry: 2024</p>
                </div>
            </div>
        </div>
        
        <!-- Right Side Section with ELO Graph & Stats Table -->
        <div class="section" style="width: 65%">
            <div class="frame" style="height: 50%">
                <h2>ELO Graph</h2>
                <div class="graph-container" id="eloGraphContainer"></div>
            </div>
            <div class="frame" style="height: 50%">
                <h2>Player Stats</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Stat</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Aggression</td>
                            <td>16</td>
                        </tr>
                        <tr>
                            <td>Stamina</td>
                            <td>15</td>
                        </tr>
                        <tr>
                            <td>Strength</td>
                            <td>14</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- Additional Full Width Section -->
    <div class="full-width-section">
        <div class="frame">
            <h2>Match History</h2>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Opponent</th>
                        <th>Result</th>
                        <th>Performance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2024-02-01</td>
                        <td>Team B</td>
                        <td>Win 3-1</td>
                        <td>2 Goals, 1 Assist</td>
                    </tr>
                    <tr>
                        <td>2024-01-25</td>
                        <td>Team C</td>
                        <td>Loss 0-2</td>
                        <td>Played Full Match</td>
                    </tr>
                    <tr>
                        <td>2024-02-01</td>
                        <td>Team B</td>
                        <td>Win 3-1</td>
                        <td>2 Goals, 1 Assist</td>
                    </tr>
                    <tr>
                        <td>2024-01-25</td>
                        <td>Team C</td>
                        <td>Loss 0-2</td>
                        <td>Played Full Match</td>
                    </tr>
                    <tr>
                        <td>2024-02-01</td>
                        <td>Team B</td>
                        <td>Win 3-1</td>
                        <td>2 Goals, 1 Assist</td>
                    </tr>
                    <tr>
                        <td>2024-01-25</td>
                        <td>Team C</td>
                        <td>Loss 0-2</td>
                        <td>Played Full Match</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

  <script type="module">
    import { loadEloGraph } from '../JS/elo_graph_module.js';

    document.addEventListener("DatabaseReady", () => {
        const playerName = new URLSearchParams(window.location.search).get('player');
        const container = document.getElementById('eloGraphContainer');

        if (playerName) {
            loadEloGraph(playerName, window.db, container);
        } else {
            loadEloGraph('Foggle', window.db, container);
        }
    });
</script>

</body>
</html>